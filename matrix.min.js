/*
 *	Transformation Matrix JS v1.1 (c) Epistemex 2014
 *	www.epistemex.com
 *	License: MIT, header required.
*/
function Matrix(a){this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0;this.context=a;if(a){a.setTransform(1,0,0,1,0,0)}}Matrix.prototype.add=function(g,h,i,j,k,l){this.a+=g;this.b+=h;this.c+=i;this.d+=j;this.e+=k;this.f+=l;if(this.context){this.context.setTransform(this.a,this.b,this.c,this.d,this.e,this.f)}};Matrix.prototype.addMatrix=function(a){this.add(a.a,a.b,a.c,a.d,a.e,a.f)};Matrix.prototype.reset=function(){this.a=this.d=1;this.b=this.c=this.e=this.f=0;if(this.context){this.context.setTransform(1,0,0,1,0,0)}};Matrix.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a);this.transform(b,c,-c,b,0,0)};Matrix.prototype.scale=function(a,b){this.transform(a,0,0,b,0,0)};Matrix.prototype.skew=function(a,b){this.transform(1,b,a,1,0,0)};Matrix.prototype.setTransform=function(g,h,i,j,k,l){this.a=g;this.b=h;this.c=i;this.d=j;this.e=k;this.f=l;if(this.context){this.context.setTransform(this.a,this.b,this.c,this.d,this.e,this.f)}};Matrix.prototype.subtract=function(g,h,i,j,k,l){this.a-=g;this.b-=h;this.c-=i;this.d-=j;this.e-=k;this.f-=l;if(this.context){this.context.setTransform(this.a,this.b,this.c,this.d,this.e,this.f)}};Matrix.prototype.subtractMatrix=function(a){this.subtract(a.a,a.b,a.c,a.d,a.e,a.f)};Matrix.prototype.translate=function(a,b){this.transform(1,0,0,1,a,b)};Matrix.prototype.transform=function(b,d,f,h,j,l){var a=this.a,c=this.b,e=this.c,g=this.d,i=this.e,k=this.f;this.a=a*b+e*d;this.b=c*b+g*d;this.c=a*f+e*h;this.d=c*f+g*h;this.e=a*j+e*l+i;this.f=c*j+g*l+k;if(this.context){this.context.setTransform(this.a,this.b,this.c,this.d,this.e,this.f)}};Matrix.prototype.getInverse=function(){var g=this.a,h=this.b,i=this.c,j=this.d,k=this.e,l=this.f,n=new Matrix(),o=(g*j-h*i);n.a=j/o;n.b=-h/o;n.c=-i/o;n.d=g/o;n.e=(i*l-j*k)/o;n.f=-(g*l-h*k)/o;n.context=this.context;return n};Matrix.prototype.interpolate=function(b,c){var a=new Matrix();a.a=this.a+(b.a-this.a)*c;a.b=this.b+(b.b-this.b)*c;a.c=this.c+(b.c-this.c)*c;a.d=this.d+(b.d-this.d)*c;a.e=this.e+(b.e-this.e)*c;a.f=this.f+(b.f-this.f)*c;a.context=this.context;return a};Matrix.prototype.applyToPoint=function(c,d){var a,b;a=c*this.a+d*this.c+this.e;b=c*this.b+d*this.d+this.f;return{x:a,y:b}};Matrix.prototype.applyToArray=function(d){var a=0,c,b=[],e,f;if(typeof d[0]==="number"){for(;c=d[a];a+=2){e=c[a]*this.a+c[a+1]*this.c+this.e;f=c[a]*this.b+c[a+1]*this.d+this.f;b.push(e,f)}}else{for(;c=d[a++];){e=c.x*this.a+c.y*this.c+this.e;f=c.x*this.b+c.y*this.d+this.f;b.push({x:e,y:f})}}return b};Matrix.prototype.isIdentity=function(){return(this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.e===0&&this.f===0)};