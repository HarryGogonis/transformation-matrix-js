/*
 *	Transformation Matrix JS v1.2 (c) Epistemex 2014
 *	www.epistemex.com
 *	License: MIT, header required.
*/
function Matrix(a){this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0;this.context=a;if(a){a.setTransform(1,0,0,1,0,0)}}Matrix.prototype.flipX=function(){this.transform(-1,0,0,1,0,0)};Matrix.prototype.flipY=function(){this.transform(1,0,0,-1,0,0)};Matrix.prototype.reset=function(){this.a=this.d=1;this.b=this.c=this.e=this.f=0;this._setCtx()};Matrix.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a);this.transform(b,c,-c,b,0,0)};Matrix.prototype.rotateDeg=function(a){this.rotate(a*Math.PI/180)};Matrix.prototype.scale=function(a,b){this.transform(a,0,0,b,0,0)};Matrix.prototype.scaleX=function(a){this.transform(a,0,0,1,0,0)};Matrix.prototype.scaleY=function(a){this.transform(1,0,0,a,0,0)};Matrix.prototype.skew=function(a,b){this.transform(1,b,a,1,0,0)};Matrix.prototype.skewX=function(a){this.transform(1,0,a,1,0,0)};Matrix.prototype.skewY=function(a){this.transform(1,a,0,1,0,0)};Matrix.prototype.setTransform=function(g,h,i,j,k,l){this.a=g;this.b=h;this.c=i;this.d=j;this.e=k;this.f=l;this._setCtx()};Matrix.prototype.translate=function(a,b){this.transform(1,0,0,1,a,b)};Matrix.prototype.translateX=function(a){this.transform(1,0,0,1,a,0)};Matrix.prototype.translateY=function(a){this.transform(1,0,0,1,0,a)};Matrix.prototype.transform=function(b,d,f,h,j,l){var a=this.a,c=this.b,e=this.c,g=this.d,i=this.e,k=this.f;this.a=a*b+e*d;this.b=c*b+g*d;this.c=a*f+e*h;this.d=c*f+g*h;this.e=a*j+e*l+i;this.f=c*j+g*l+k;this._setCtx()};Matrix.prototype.getInverse=function(){var g=this.a,h=this.b,i=this.c,j=this.d,l=this.e,n=this.f,o=new Matrix(),k=(g*j-h*i);o.a=j/k;o.b=-h/k;o.c=-i/k;o.d=g/k;o.e=(i*n-j*l)/k;o.f=-(g*n-h*l)/k;return o};Matrix.prototype.interpolate=function(b,c){var a=new Matrix();a.a=this.a+(b.a-this.a)*c;a.b=this.b+(b.b-this.b)*c;a.c=this.c+(b.c-this.c)*c;a.d=this.d+(b.d-this.d)*c;a.e=this.e+(b.e-this.e)*c;a.f=this.f+(b.f-this.f)*c;return a};Matrix.prototype.applyToPoint=function(c,d){var a,b;a=c*this.a+d*this.c+this.e;b=c*this.b+d*this.d+this.f;return{x:a,y:b}};Matrix.prototype.applyToArray=function(d){var a=0,c,b=[],e,f;if(typeof d[0]==="number"){for(;c=d[a];a+=2){e=c[a]*this.a+c[a+1]*this.c+this.e;f=c[a]*this.b+c[a+1]*this.d+this.f;b.push(e,f)}}else{for(;c=d[a++];){e=c.x*this.a+c.y*this.c+this.e;f=c.x*this.b+c.y*this.d+this.f;b.push({x:e,y:f})}}return b};Matrix.prototype.isIdentity=function(){return(this._isEqual(this.a,1)&&this._isEqual(this.b,0)&&this._isEqual(this.c,0)&&this._isEqual(this.d,1)&&this._isEqual(this.e,0)&&this._isEqual(this.f,0))};Matrix.prototype.isEqual=function(a){return(this._isEqual(this.a,a.a)&&this._isEqual(this.b,a.b)&&this._isEqual(this.c,a.c)&&this._isEqual(this.d,a.d)&&this._isEqual(this.e,a.e)&&this._isEqual(this.f,a.f))};Matrix.prototype._isEqual=function(a,b){return Math.abs(a-b)<1e-14};Matrix.prototype._setCtx=function(){if(this.context){this.context.setTransform(this.a,this.b,this.c,this.d,this.e,this.f)}};